!function(){"use strict";const t="https://vuzocqdmeetootjqnejp.supabase.co/functions/v1/view",e=2e3,n="#:~:text=",i="#:~:",a=[8,13,18,23],o=[[48,57],[65,70],[97,102]];function r(){var t=window.location.hostname;return"localhost"===t||"::1"===t||t.endsWith(".local")||t.startsWith("127.")||t.startsWith("10.")||t.startsWith("192.168.")}function c(){for(var t=document.getElementsByTagName("script"),e=0;e<t.length;e++){var n=t[e];if(n.src&&-1!==n.src.indexOf("aicw-view")){var i=n.getAttribute("data-key");if(i)return i}}return null}function d(t,n){if(!t)return"";n=n||e;var i=String(t);return i.length>n&&(i=i.substring(0,n)),(i=i.replace(/[<>'"]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/data:/gi,"").replace(/vbscript:/gi,"")).trim()}function u(t){if(!t||36!==t.length)return!1;for(var e=0;e<t.length;e++){var n=t.charCodeAt(e);if(-1!==a.indexOf(e)){if(45!==n)return!1}else{for(var i=!1,r=0;r<o.length;r++){var c=o[r];if(n>=c[0]&&n<=c[1]){i=!0;break}}if(!i)return!1}}return!0}function l(t){var a=function(t){var e={};try{new URL(t).searchParams.forEach(function(t,n){var i=n.toLowerCase();0===i.indexOf("utm_")&&(e[i]=t)})}catch(t){return{}}return e}(window.location.href),o=document.referrer||null,r=function(){try{if("undefined"==typeof performance||"function"!=typeof performance.getEntriesByType)return null;var t=performance.getEntriesByType("navigation");if(!t||0===t.length)return null;var e=t[0].name;if(!e)return null;var a=e.indexOf(n);if(-1===a){if(-1===(a=e.indexOf(i)))return null;a+=4}else a+=9;var o=e.substring(a);return o&&(o=decodeURIComponent(o)),o||null}catch(t){return null}}(),c={data_key:t,page_host:window.location.hostname,page_path:d(window.location.pathname,e),page_title:d(document.title,e),referrer:d(o,e),text_fragment:d(r,2e3),created_at:(new Date).toISOString()};for(var u in a)a.hasOwnProperty(u)&&(c[u]=d(a[u],255));return c}function s(){var e=c();e&&(u(e)&&function(e){if(!r()&&window===window.parent){var n=JSON.stringify(e);if(void 0!==navigator.sendBeacon)try{var i=new Blob([n],{type:"text/plain"});if(navigator.sendBeacon(t,i))return}catch(t){}if("undefined"==typeof fetch)try{var a=new XMLHttpRequest;a.open("POST",t,!0),a.setRequestHeader("Content-Type","text/plain"),a.send(n)}catch(t){}else fetch(t,{method:"POST",headers:{"Content-Type":"text/plain"},body:n,keepalive:!0,credentials:"omit"}).catch(function(){})}}(l(e)))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s();var f=window.location.pathname,w=null;function h(){w&&clearTimeout(w),w=setTimeout(function(){f!==window.location.pathname&&(window.__aicw_engagement&&window.__aicw_engagement.pre(),f=window.location.pathname,s(),window.__aicw_engagement&&window.__aicw_engagement.post())},100)}if(!window.history.pushState.__aicw_patched){var p=window.history.pushState;window.history.pushState=function(){p.apply(this,arguments),h()},window.history.pushState.__aicw_patched=!0}if(!window.history.replaceState.__aicw_patched){var v=window.history.replaceState;window.history.replaceState=function(){v.apply(this,arguments),h()},window.history.replaceState.__aicw_patched=!0}window.addEventListener("popstate",function(){h()}),function(){var n=!1,i=!1,a=-1,o=0,l=0,s=0,f=0,w=null;function h(){var t=document.body||{},e=document.documentElement||{};return Math.max(t.scrollHeight||0,t.offsetHeight||0,t.clientHeight||0,e.scrollHeight||0,e.offsetHeight||0,e.clientHeight||0)}function p(){var t=document.body||{},e=document.documentElement||{},n=window.innerHeight||e.clientHeight||0,i=window.scrollY||e.scrollTop||t.scrollTop||0;return s<=n?s:i+n}function v(){return o?l+(Date.now()-o):l}function g(){var n=v();if(!i&&(a<f||n>=3e3)){a=f;var w=s>0?Math.round(f/s*100):0;w=Math.max(0,Math.min(100,w));var h=c();if(!h||!u(h))return;var p={data_key:h,event_type:"engagement",page_host:window.location.hostname,page_path:d(window.location.pathname,e),engagement_time_ms:n,scroll_depth_percent:w,created_at:(new Date).toISOString()};if(o=0,l=0,r())return;var g=JSON.stringify(p);if("undefined"!=typeof fetch)try{return void fetch(t,{method:"POST",headers:{"Content-Type":"text/plain"},body:g,keepalive:!0,credentials:"omit"})}catch(t){}if(void 0!==navigator.sendBeacon)try{var m=new Blob([g],{type:"text/plain"});navigator.sendBeacon(t,m)}catch(t){}}}function m(){"visible"===document.visibilityState&&document.hasFocus()&&0===o?o=Date.now():"hidden"!==document.visibilityState&&document.hasFocus()||(l=v(),o=0,g())}function y(){i=!1,a=-1,l=0,o=Date.now(),n||(document.addEventListener("visibilitychange",m),window.addEventListener("blur",m),window.addEventListener("focus",m),n=!0)}function _(){s=h(),f=p(),window.addEventListener("load",function(){s=h();var t=0,e=setInterval(function(){s=h(),15===++t&&clearInterval(e)},200)}),document.addEventListener("scroll",function(){w||(w=setTimeout(function(){w=null,s=h();var t=p();t>f&&(f=t)},100))})}window.__aicw_engagement={pre:function(){n&&(g(),s=h(),f=p())},post:y,init:_},_(),y()}()}();