!function(){"use strict";const e="https://vuzocqdmeetootjqnejp.supabase.co/functions/v1/view",t=["headlesschrome","phantomjs","selenium","webdriver","puppeteer","playwright","python","curl","wget","java/","go-http","node.js","axios","postman"],n=["__webdriver_evaluate","__selenium_evaluate","__webdriver_script_function","__driver_evaluate","_Selenium_IDE_Recorder","_selenium"],i=2e3,a="#:~:text=",r="#:~:",o=[8,13,18,23],c=[[48,57],[65,70],[97,102]];function d(){var e=window.location.hostname;return"localhost"===e||"::1"===e||e.endsWith(".local")||e.startsWith("127.")||e.startsWith("10.")||e.startsWith("192.168.")}function u(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var n=e[t];if(n.src&&-1!==n.src.indexOf("aicw-view")){var i=n.getAttribute("data-key");if(i)return i}}return null}function l(e,t){if(!e)return"";t=t||i;var n=String(e);return n.length>t&&(n=n.substring(0,t)),(n=n.replace(/[<>'"]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/data:/gi,"").replace(/vbscript:/gi,"")).trim()}function s(e){if(!e||36!==e.length)return!1;for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(-1!==o.indexOf(t)){if(45!==n)return!1}else{for(var i=!1,a=0;a<c.length;a++){var r=c[a];if(n>=r[0]&&n<=r[1]){i=!0;break}}if(!i)return!1}}return!0}function w(e){var t=function(e){var t={};try{new URL(e).searchParams.forEach(function(e,n){var i=n.toLowerCase();0===i.indexOf("utm_")&&(t[i]=e)})}catch(e){return{}}return t}(window.location.href),n=document.referrer||null,o=function(){try{if("undefined"==typeof performance||"function"!=typeof performance.getEntriesByType)return null;var e=performance.getEntriesByType("navigation");if(!e||0===e.length)return null;var t=e[0].name;if(!t)return null;var n=t.indexOf(a);if(-1===n){if(-1===(n=t.indexOf(r)))return null;n+=4}else n+=9;var i=t.substring(n);return i&&(i=decodeURIComponent(i)),i||null}catch(e){return null}}(),c={data_key:e,page_host:window.location.hostname,page_path:l(window.location.pathname,i),page_title:l(document.title,i),referrer:l(n,i),text_fragment:l(o,2e3),created_at:(new Date).toISOString()};for(var d in t)t.hasOwnProperty(d)&&(c[d]=l(t[d],255));return c}function f(i){if(!d()&&!function(){try{if(!0===window.navigator.webdriver||window.callPhantom||window._phantom||window.__nightmare)return!0;for(var e=(navigator.userAgent||"").toLowerCase(),i=0;i<t.length;i++)if(e.includes(t[i]))return!0;for(i=0;i<n.length;i++)if(void 0!==window[n[i]])return!0}catch(e){return!1}return!1}()&&window===window.parent){var a=JSON.stringify(i);if(void 0!==navigator.sendBeacon)try{var r=new Blob([a],{type:"text/plain"});if(navigator.sendBeacon(e,r))return}catch(e){}if("undefined"==typeof fetch)try{var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-Type","text/plain"),o.send(a)}catch(e){}else fetch(e,{method:"POST",headers:{"Content-Type":"text/plain"},body:a,keepalive:!0,credentials:"omit"}).catch(function(){})}}function h(){var e=u();e&&(s(e)&&f(w(e)))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",h):h();var p=window.location.pathname,v=null;function m(){v&&clearTimeout(v),v=setTimeout(function(){p!==window.location.pathname&&(window.__aicw_engagement&&window.__aicw_engagement.pre(),p=window.location.pathname,h(),window.__aicw_engagement&&window.__aicw_engagement.post())},100)}if(!window.history.pushState.__aicw_patched){var g=window.history.pushState;window.history.pushState=function(){g.apply(this,arguments),m()},window.history.pushState.__aicw_patched=!0}if(!window.history.replaceState.__aicw_patched){var _=window.history.replaceState;window.history.replaceState=function(){_.apply(this,arguments),m()},window.history.replaceState.__aicw_patched=!0}window.addEventListener("popstate",function(){m()}),function(){var t=!1,n=!1,a=-1,r=0,o=0,c=0,w=0,f=null;function h(){var e=document.body||{},t=document.documentElement||{};return Math.max(e.scrollHeight||0,e.offsetHeight||0,e.clientHeight||0,t.scrollHeight||0,t.offsetHeight||0,t.clientHeight||0)}function p(){var e=document.body||{},t=document.documentElement||{},n=window.innerHeight||t.clientHeight||0,i=window.scrollY||t.scrollTop||e.scrollTop||0;return c<=n?c:i+n}function v(){return r?o+(Date.now()-r):o}function m(){var t=v();if(!n&&(a<w||t>=3e3)){a=w;var f=c>0?Math.round(w/c*100):0;f=Math.max(0,Math.min(100,f));var h=u();if(!h||!s(h))return;var p={data_key:h,event_type:"engagement",page_host:window.location.hostname,page_path:l(window.location.pathname,i),engagement_time_ms:t,scroll_depth_percent:f,created_at:(new Date).toISOString()};if(r=0,o=0,d())return;var m=JSON.stringify(p);if("undefined"!=typeof fetch)try{return void fetch(e,{method:"POST",headers:{"Content-Type":"text/plain"},body:m,keepalive:!0,credentials:"omit"})}catch(e){}if(void 0!==navigator.sendBeacon)try{var g=new Blob([m],{type:"text/plain"});navigator.sendBeacon(e,g)}catch(e){}}}function g(){"visible"===document.visibilityState&&document.hasFocus()&&0===r?r=Date.now():"hidden"!==document.visibilityState&&document.hasFocus()||(o=v(),r=0,m())}function _(){n=!1,a=-1,o=0,r=Date.now(),t||(document.addEventListener("visibilitychange",g),window.addEventListener("blur",g),window.addEventListener("focus",g),t=!0)}function y(){c=h(),w=p(),window.addEventListener("load",function(){c=h();var e=0,t=setInterval(function(){c=h(),15===++e&&clearInterval(t)},200)}),document.addEventListener("scroll",function(){f||(f=setTimeout(function(){f=null,c=h();var e=p();e>w&&(w=e)},100))})}window.__aicw_engagement={pre:function(){t&&(m(),c=h(),w=p())},post:_,init:y},y(),_()}()}();